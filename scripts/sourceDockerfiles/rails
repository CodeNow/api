FROM ruby:<ruby-version>

# Install Rails (and its dependencies)
RUN apt-get update && apt-get install -y nodejs --no-install-recommends && rm -rf /var/lib/apt/lists/*

# see http://guides.rubyonrails.org/command_line.html#rails-dbconsole
RUN apt-get update && apt-get install -y mysql-client postgresql-client sqlite3 --no-install-recommends && rm -rf /var/lib/apt/lists/*

# Specify the version of Rails to install
ENV RAILS_VERSION <rails-version>
RUN gem install rails --version "$RAILS_VERSION"

<before-main-repo>
#default run:bundle install # runnable-cache
<after-main-repo>

# Open up ports on the server
EXPOSE <user-specified-ports>

# Command to start the app
CMD <start-command>
